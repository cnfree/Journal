# MySQL技术内幕

## 第一章
  * **数据库** 是物理操作系统文件，比如 frm, MYD, MYI, ibd 结尾的文件。
  * **数据库实例** 是一个进程，由后台线程及一个共享内存组成。
  * 数据库实例用来操作数据库文件。
  * 集群环境下，可能一个数据库被多个数据库实例使用。
  * MySQL数据库按 /etc/my.cnf --> /etc/mysql/my.cnf --> /usr/local/mysql/etc/my.cnf --> ~/.my.cnf 顺序读取配置文件。
  * 几个配置文件包含相同的参数，以读取到的最后一个配置文件的参数为准。
  * **数据库是文件的集合，数据库实例是程序**。
  * **存储引擎是基于表的**，而不是数据库。
  * InnoDB特点是**行锁设计**，支持**外键**，**默认读取操作不会产生锁**。MySQL默认存储引擎。
  * InnoDB表单独存放在一个独立的ibd文件中。
  * InnoDB通过使用**多版本并发控制（MVCC）**来获得高并发性。默认为**可重复读**。通过**临键锁来避免幻读**。 
  * 如果没有显式指定主键，会每一行生成一个6字节的ROWID，以此作为主键。
  * MyISAM **不支持事务**，**表锁**设计，支持**全文索引**。**面向OLAP应用**。
  * MyISAM 的缓冲池只**缓存索引文件，而不缓存数据文件**。
  * MyISAM 由MYD和MYI文件组成，MYD存储数据文件，MYI存储索引文件。
  * Memory 引擎默认采用Hash索引，而不是B+树索引。
  * Memory 只支持表锁，并发性较差，**不支持TEXT和BLOB类型**。VARCHAR类型按照CHAR存储。
  * 中间结果集产生的**临时表采用Memory引擎**，但如果包含TEXT和BLOB类型，会转换为MyISAM而损失性能。
  * Archive 引擎**只支持INSERT和SELECT**操作。会对数据进行压缩，压缩比1:10，**非常适合存储归档数据**。
  * ETL操作，MyISAM性能好，OLTP环境，InnoDB性能更好。
  * 不同存储引擎特性比较
  ![不同引擎特性比较][dbengine]
  
  [dbengine]: img/dbengine.png 
  